<!DOCTYPE html> 
<html lang="ar"> 
<head> 
    <meta charset="UTF-8"> 
    <link rel="shortcut icon" href="OIP.png"> 
    <meta name="description" content="ادعم العمدة خالد صقر، مرشحكم في انتخابات مجلس النواب 2025 - رمز المسدس. أنشئ كارت دعمك الشخصي وشاركه مع أصدقائك."> 
    <meta name="keywords" content="العمدة خالد صقر, خالد صقر, انتخابات 2025, مرشح مجلس النواب, رمز المسدس, دعم خالد صقر, زاوية صقر, خالد صقر ابن البلد, كارت دعم, دعم مرشح, صور دعم المرشح"> 
    <meta name="author" content="العمدة خالد صقر"> 
    <meta property="og:title" content="ادعم العمدة خالد صقر - رمز المسدس"> 
    <meta property="og:description" content="اصنع كارت دعمك وشارك في حملة دعم العمدة خالد صقر لانتخابات مجلس النواب 2025."> 
    <meta property="og:image" content="https://example.com/khaled_logo.png"> 
    <meta property="og:url" content="https://example.com/"> 
    <meta property="og:type" content="website"> 
    <meta name="twitter:card" content="summary_large_image"> 
    <meta name="twitter:title" content="ادعم العمدة خالد صقر - رمز المسدس"> 
    <meta name="twitter:description" content="أنشئ كارت دعمك وشارك مع أصدقائك."> 
    <meta name="twitter:image" content="https://example.com/khaled_logo.png"> 
    <title>العمدة خالد صقر ثقتكم رمز المسدس</title> 
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css"> 
    <style> 
        body { 
            text-align: center; 
            font-family: 'Cairo', sans-serif; 
            direction: rtl; 
            background-color: #f0f0f0; 
            margin: 0; 
            padding: 20px; 
            overflow-x: hidden; 
        } 
        #splash { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #003366, #007bff); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            font-size: 32px; 
            font-weight: bold; 
            z-index: 9999; 
            opacity: 1; 
            animation: fadeOut 1.5s ease 2s forwards; 
        } 
        #splash span { 
            font-size: 48px; 
            margin-top: 20px; 
        } 
        @keyframes fadeOut { 
            to { 
                opacity: 0; 
                visibility: hidden; 
            } 
        } 
        #mainTitle { 
            color: #003366; 
            font-weight: 800; 
            margin-bottom: 30px; 
            text-shadow: 2px 2px 5px rgba(0,0,0,0.1); 
            font-size: clamp(24px, 6vw, 42px); 
            text-align: center; 
            opacity: 0; 
            transform: translateY(50px); 
            animation: fadeUp 1.2s ease forwards; 
            animation-delay: 2.3s; 
        } 
        @keyframes fadeUp { 
            to { 
                opacity: 1; 
                transform: translateY(0); 
            } 
        } 
        .container { 
            margin: auto; 
            max-width: 1080px; 
            background: #fff; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            opacity: 0; 
            transform: translateY(50px); 
            animation: fadeUp 1.5s ease forwards; 
            animation-delay: 2.5s; 
            margin-bottom: 80px; 
        } 
        .hidden { 
            display: none; 
        } 
        #preview { 
            width: 300px; 
            height: 300px; 
            margin: 10px auto; 
            overflow: hidden; 
            border: 1px solid #ccc; 
        } 
        #preview img { 
            max-width: 100%; 
        } 
        #finalCanvas { 
            border: 1px solid #ccc; 
            display: none; 
            max-width: 100%; 
            margin-top: 20px; 
        } 
        #downloadBtn, #goToPageBtn, #shareBtn { 
            display: none; 
            margin: 10px 10px; 
            font-size: 18px; 
            text-decoration: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
        } 
        #downloadBtn, #goToPageBtn { 
            background-color: #4CAF50; 
            color: #fff; 
        } 
        #downloadBtn:hover, #goToPageBtn:hover { 
            background-color: #45a049; 
        } 
        #shareBtn { 
            background-color: #1877f2; 
            color: #fff; 
        } 
        #shareBtn:hover { 
            background-color: #145dbf; 
        } 
        #nameInput { 
            width: 80%; 
            max-width: 400px; 
            padding: 12px 15px; 
            font-size: 20px; 
            font-family: 'Cairo', sans-serif; 
            text-align: center; 
            border: 2px solid #4CAF50; 
            border-radius: 10px; 
            outline: none; 
            transition: all 0.3s ease-in-out; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        } 
        #nameInput:focus { 
            border-color: #003366; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
        } 
        #imageInput { 
            display: none; 
        } 
        .custom-file-label { 
            display: inline-block; 
            padding: 12px 20px; 
            font-size: 18px; 
            background-color: #4CAF50; 
            color: #fff; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: background-color 0.3s; 
        } 
        .custom-file-label:hover { 
            background-color: #45a049; 
        } 
        .file-hint { 
            font-size: 14px; 
            color: #555; 
            margin-top: 8px; 
        } 
        .scroll-banner { 
            position: fixed; 
            bottom: 0; 
            right: 0; 
            width: 100%; 
            background: linear-gradient(90deg, #003366, #007bff); 
            color: white; 
            font-size: 22px; 
            font-weight: bold; 
            overflow: hidden; 
            white-space: nowrap; 
            padding: 10px 0; 
            z-index: 999; 
        } 
        .scroll-text { 
            display: inline-flex; 
            align-items: center; 
            animation: scroll-left 12s linear infinite; 
        } 
        .scroll-text img { 
            width: 40px; 
            height: 40px; 
            margin: 0 8px; 
            vertical-align: middle; 
            border-radius: 50%; 
            background-color: #ffffff; 
            padding: 5px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
        } 
        .scroll-text img:hover { 
            transform: scale(1.1); 
            box-shadow: 0 6px 12px rgba(0,0,0,0.3); 
        } 
        @keyframes scroll-left { 
            from { 
                transform: translateX(100%); 
            } 
            to { 
                transform: translateX(-100%); 
            } 
        } 
    </style> 
</head> 
<body> 
    <div id="splash"> 
        <div>مرحبًا بكم</div> 
        <span>العمدة خالد صقر</span> 
    </div> 
    <h1 id="mainTitle">ادعم مرشحك فى انتخابات<wbr> مجلس النواب 2025</h1> 
    <div class="container"> 
        <img src="khaled_logo.png" alt="صورة العمدة خالد صقر" style="max-width: 100%; height: auto;"> 
        <br><br> 
        <input type="text" id="nameInput" placeholder="اكتب اسمك هنا" autofocus> 
        <br><br> 
        <label for="imageInput" class="custom-file-label">📷 اختر صورتك</label> 
        <input type="file" id="imageInput" accept="image/*"> 
        <div class="file-hint">الرجاء رفع صورة شخصية واضحة</div> 
        <br><br> 
        <div id="cropperContainer" class="hidden"> 
            <h3>قص صورتك</h3> 
            <div id="preview"><img id="imagePreview" alt="معاينة"></div> 
            <button id="cropBtn">اعتماد القص</button> 
        </div> 
        <button id="generateBtn" class="hidden">إنشاء كارت الدعم</button> 
        <canvas id="finalCanvas" width="1080" height="1350"></canvas> 
        <br> 
        <a id="downloadBtn" download="card.png">تحميل الكارت</a> 
        <a id="goToPageBtn" href="https://www.facebook.com/share/1A8YXzAtjK/" target="_blank">زيارة صفحتنا</a> 
        <a id="shareBtn" class="hidden" target="_blank">📤 شارك على فيسبوك</a> 
    </div> 
    <div class="scroll-banner"> 
        <div class="scroll-text"> 
            <img src="OIP.png" alt="المسدس"> صوتك هيفرق ... شارك وادعم العمدة خالد صقر رمز المسدس <img src="OIP.png" alt="المسدس"> 
        </div> 
    </div> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script> 
    <script> 
        let cropper; 
        let croppedImageData; 
        const imageInput = document.getElementById('imageInput'); 
        const cropperContainer = document.getElementById('cropperContainer'); 
        const imagePreview = document.getElementById('imagePreview'); 
        const cropBtn = document.getElementById('cropBtn'); 
        const generateBtn = document.getElementById('generateBtn'); 
        const finalCanvas = document.getElementById('finalCanvas'); 
        const downloadBtn = document.getElementById('downloadBtn'); 
        const goToPageBtn = document.getElementById('goToPageBtn'); 
        const nameInput = document.getElementById('nameInput'); 
        const shareBtn = document.getElementById('shareBtn'); 

        window.addEventListener("load", () => nameInput.focus()); 

        imageInput.addEventListener('change', function() { 
            const file = this.files[0]; 
            if (!file) return; 
            const reader = new FileReader(); 
            reader.onload = function(e) { 
                imagePreview.src = e.target.result; 
                cropperContainer.classList.remove('hidden'); 
                if (cropper) cropper.destroy(); 
                cropper = new Cropper(imagePreview, { 
                    aspectRatio: 1, 
                    viewMode: 2 
                }); 
            }; 
            reader.readAsDataURL(file); 
        }); 

        cropBtn.addEventListener('click', function() { 
            if (!cropper) return; 
            const canvas = cropper.getCroppedCanvas({ width: 300, height: 300 }); 
            croppedImageData = canvas.toDataURL('image/png'); 
            cropperContainer.classList.add('hidden'); 
            generateBtn.classList.remove('hidden'); 
        }); 

        generateBtn.addEventListener('click', function() { 
            if (!nameInput.value.trim()) { 
                alert("من فضلك اكتب اسمك"); 
                return; 
            } 
            const ctx = finalCanvas.getContext('2d'); 
            const bg = new Image(); 
            bg.src = "khaled_support.png"; 
            const userImg = new Image(); 
            userImg.src = croppedImageData; 
            let loaded = 0; 
            [bg, userImg].forEach(img => { 
                img.onload = () => { 
                    loaded++; 
                    if (loaded === 2) drawFinal(ctx, bg, userImg); 
                }; 
            }); 

        }); 
        

function drawFinal(ctx, bg, userImg) {
    ctx.clearRect(0, 0, finalCanvas.width, finalCanvas.height);
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);

    // الصورة الشخصية الرئيسية (دائرية)
    const imageX = (finalCanvas.width - 320) / 2; 
    const imageY = 80; 
    const radius = 160; 
    ctx.save(); 
    ctx.beginPath(); 
    ctx.arc(imageX + radius, imageY + radius, radius, 0, 2 * Math.PI); 
    ctx.closePath(); 
    ctx.clip(); 
    ctx.drawImage(userImg, imageX, imageY, 2 * radius, 2 * radius); 
    ctx.restore(); 

    const nameY = imageY + 2 * radius + 60; 
    ctx.fillStyle = "#003366"; 
    ctx.font = "bold 48px 'Cairo'"; 
    ctx.textAlign = "center"; 
    ctx.strokeStyle = "#fff"; 
    ctx.lineWidth = 5; 
    ctx.strokeText(nameInput.value, finalCanvas.width / 2, nameY); 
    ctx.fillText(nameInput.value, finalCanvas.width / 2, nameY); 

    const line1 = "أنا أدعم العمدة خالد صقر في انتخابات"; 
    const line2 = "مجلس النواب 2025"; 
    const supportY = nameY + 70; 
    ctx.font = "bold 42px 'Cairo'"; 
    ctx.fillStyle = "#003366"; 
    ctx.textAlign = "center"; 
    ctx.strokeStyle = "#fff"; 
    ctx.lineWidth = 5; 
    ctx.strokeText(line1, finalCanvas.width / 2, supportY); 
    ctx.fillText(line1, finalCanvas.width / 2, supportY); 
    ctx.strokeText(line2, finalCanvas.width / 2, supportY + 55); 
    ctx.fillText(line2, finalCanvas.width / 2, supportY + 55); 

    // رسم صورة الخلفية khaled_support
    const availableHeight = finalCanvas.height - (supportY + 100); 
    const availableWidth = finalCanvas.width; 
    const bgRatio = bg.width / bg.height; 
    let bgDrawWidth = availableWidth; 
    let bgDrawHeight = bgDrawWidth / bgRatio; 
    if (bgDrawHeight > availableHeight) { 
        bgDrawHeight = availableHeight; 
        bgDrawWidth = bgDrawHeight * bgRatio; 
    } 
    const bgX = (finalCanvas.width - bgDrawWidth) / 2; 
    const bgY = supportY + 100; 
    ctx.drawImage(bg, bgX, bgY, bgDrawWidth, bgDrawHeight); 

    // إضافة صورة المستخدم مع تعديل الموقع
    const userPhotoSize = 120;
    // حساب الموضع الأساسي في الثلث الأول (الجزء العلوي) من الصورة
    const userPhotoY = bgY + (bgDrawHeight * 1/5) - (userPhotoSize / 2) + 45; // زيادة 40 بكسل للأسفل
    // تحريك إلى اليمين (زيادة 20 بكسل)
    const userPhotoX = bgX + (bgDrawWidth * 1/7) - (userPhotoSize / 2) + 13; // زيادة 20 بكسل لليمين
    
    ctx.save();
    ctx.beginPath();
    // جعل الصورة بيضاوية الشكل لمظهر أكثر جمالاً
    ctx.ellipse(userPhotoX + userPhotoSize/2, userPhotoY + userPhotoSize/2, 
               userPhotoSize/2, userPhotoSize/1.8, 0, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.clip();
    ctx.drawImage(userImg, userPhotoX, userPhotoY, userPhotoSize, userPhotoSize);
    ctx.restore();

    // إضافة إطار حول الصورة
    ctx.strokeStyle = "#4CAF50";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.ellipse(userPhotoX + userPhotoSize/2, userPhotoY + userPhotoSize/2, 
               userPhotoSize/2, userPhotoSize/1.8, 0, 0, 2 * Math.PI);
    ctx.stroke();

    finalCanvas.style.display = "block"; 
    downloadBtn.style.display = "inline-block"; 
    goToPageBtn.style.display = "inline-block"; 
    shareBtn.style.display = "inline-block"; 
    downloadBtn.href = finalCanvas.toDataURL("image/png"); 

    // مشاركة على فيسبوك 
    shareBtn.href = "https://www.facebook.com/sharer/sharer.php?u=https://www.facebook.com/share/1A8YXzAtjK/"; 
}
</script> 
</body> 
</html>